<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>DriveMatrix Backend — Guía de uso para programadores</title>
<link rel="icon" type="image/png" href="documentacion.png">
<style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

/* Override strong tags inside headings to maintain consistent weight */
h1 strong,
h2 strong,
h3 strong {
	font-weight: 600;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 10px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.collection-content td {
	white-space: pre-wrap;
	word-break: break-word;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.callout img.notion-static-icon {
	width: 1em;
	height: 1em;
}

.callout p {
	margin: 0;
}

.callout h1,
.callout h2,
.callout h3 {
	margin: 0 0 0.6rem;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

blockquote.quote-large {
	font-size: 1.25em;
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(44, 44, 43, 1);
}
.highlight-gray {
	color: rgba(125, 122, 117, 1);
	fill: rgba(125, 122, 117, 1);
}
.highlight-brown {
	color: rgba(159, 118, 90, 1);
	fill: rgba(159, 118, 90, 1);
}
.highlight-orange {
	color: rgba(210, 123, 45, 1);
	fill: rgba(210, 123, 45, 1);
}
.highlight-yellow {
	color: rgba(203, 148, 52, 1);
	fill: rgba(203, 148, 52, 1);
}
.highlight-teal {
	color: rgba(80, 148, 110, 1);
	fill: rgba(80, 148, 110, 1);
}
.highlight-blue {
	color: rgba(56, 125, 201, 1);
	fill: rgba(56, 125, 201, 1);
}
.highlight-purple {
	color: rgba(154, 107, 180, 1);
	fill: rgba(154, 107, 180, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(207, 81, 72, 1);
	fill: rgba(207, 81, 72, 1);
}
.highlight-default_background {
	color: rgba(44, 44, 43, 1);
}
.highlight-gray_background {
	background: rgba(42, 28, 0, 0.07);
}
.highlight-brown_background {
	background: rgba(139, 46, 0, 0.086);
}
.highlight-orange_background {
	background: rgba(224, 101, 1, 0.129);
}
.highlight-yellow_background {
	background: rgba(211, 168, 0, 0.137);
}
.highlight-teal_background {
	background: rgba(0, 100, 45, 0.09);
}
.highlight-blue_background {
	background: rgba(0, 124, 215, 0.094);
}
.highlight-purple_background {
	background: rgba(102, 0, 178, 0.078);
}
.highlight-pink_background {
	background: rgba(197, 0, 93, 0.086);
}
.highlight-red_background {
	background: rgba(223, 22, 0, 0.094);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(125, 122, 117, 1);
	fill: rgba(125, 122, 117, 1);
}
.block-color-brown {
	color: rgba(159, 118, 90, 1);
	fill: rgba(159, 118, 90, 1);
}
.block-color-orange {
	color: rgba(210, 123, 45, 1);
	fill: rgba(210, 123, 45, 1);
}
.block-color-yellow {
	color: rgba(203, 148, 52, 1);
	fill: rgba(203, 148, 52, 1);
}
.block-color-teal {
	color: rgba(80, 148, 110, 1);
	fill: rgba(80, 148, 110, 1);
}
.block-color-blue {
	color: rgba(56, 125, 201, 1);
	fill: rgba(56, 125, 201, 1);
}
.block-color-purple {
	color: rgba(154, 107, 180, 1);
	fill: rgba(154, 107, 180, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(207, 81, 72, 1);
	fill: rgba(207, 81, 72, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(240, 239, 237, 1);
}
.block-color-brown_background {
	background: rgba(245, 237, 233, 1);
}
.block-color-orange_background {
	background: rgba(251, 235, 222, 1);
}
.block-color-yellow_background {
	background: rgba(249, 243, 220, 1);
}
.block-color-teal_background {
	background: rgba(232, 241, 236, 1);
}
.block-color-blue_background {
	background: rgba(229, 242, 252, 1);
}
.block-color-purple_background {
	background: rgba(243, 235, 249, 1);
}
.block-color-pink_background {
	background: rgba(250, 233, 241, 1);
}
.block-color-red_background {
	background: rgba(252, 233, 231, 1);
}
.select-value-color-default { background-color: rgba(42, 28, 0, 0.07); }
.select-value-color-gray { background-color: rgba(28, 19, 1, 0.11); }
.select-value-color-brown { background-color: rgba(127, 51, 0, 0.156); }
.select-value-color-orange { background-color: rgba(196, 88, 0, 0.203); }
.select-value-color-yellow { background-color: rgba(209, 156, 0, 0.282); }
.select-value-color-green { background-color: rgba(0, 96, 38, 0.156); }
.select-value-color-blue { background-color: rgba(0, 118, 217, 0.203); }
.select-value-color-purple { background-color: rgba(92, 0, 163, 0.141); }
.select-value-color-pink { background-color: rgba(183, 0, 78, 0.152); }
.select-value-color-red { background-color: rgba(206, 24, 0, 0.164); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="2bd98dbf-b003-808d-9fdb-cb4fa7e6eac4" class="page sans"><header><h1 class="page-title" dir="auto">DriveMatrix Backend — Guía de uso para programadores</h1><p class="page-description" dir="auto"></p><table class="properties"><tbody><tr class="property-row property-row-created_time"><th><span class="icon property-icon"><img src="https://www.notion.so/icons/clock_gray.svg" style="width:14px;height:14px;display:block"/></span>Creado</th><td><time>@2 de diciembre de 2025 14:14</time></td></tr></tbody></table></header><div class="page-body"><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-818b-90ea-d9e515196a80" class="">Formato</h2></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81ab-8672-cb43f9c3c29c" class="bulleted-list"><li style="list-style-type:disc">Data exchange: <code>application/json</code></li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8121-9ffa-cd2e5daea7e2" class="bulleted-list"><li style="list-style-type:disc">Autenticación: JWT en header <code>Authorization: Bearer &lt;token&gt;</code> para rutas protegidas.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81a4-8cc5-fe03b97b4b07" class="bulleted-list"><li style="list-style-type:disc">Todas las respuestas de error devuelven: <code>{ &quot;error&quot;: &quot;mensaje&quot; }</code></li></ul></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8192-849a-c4ef7ea46865"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8133-ae89-f33435fb3544" class="">Índice</h2></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-81a3-bdd1-ccac7057f479" class="numbered-list" start="1"><li>Autenticación</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-817c-aa8a-e5877d65fc50" class="numbered-list" start="2"><li>Usuarios</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-81a6-8dd2-d571cbfb7094" class="numbered-list" start="3"><li>Wishlist</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-81ce-a7b1-d97c02e9b4a4" class="numbered-list" start="4"><li>Compras</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-81f6-b202-fb0ba30ee7d8" class="numbered-list" start="5"><li>Valoraciones</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-8136-913d-c230885d9b15" class="numbered-list" start="6"><li>Vehículos</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-8181-816c-e322f8e88e22" class="numbered-list" start="7"><li>Integración con Auto.dev</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-819a-9526-fc875bb42793" class="numbered-list" start="8"><li>Respuestas y códigos de estado comunes</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2c198dbf-b003-818c-818e-ce3ba2205e6b" class="numbered-list" start="9"><li>Notas de implementación</li></ol></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8161-b01e-c38c91745412"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-81ee-aa24-fbbfc3417cd8" class="">1. Autenticación</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-81ba-857c-cba4a8c9d122" class="">Login</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8123-843c-edf62273d559" class=""><strong>POST</strong> <code>/api/user/login</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ae-9095-dcd6d7c2e15d" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8195-8c92-f3613eb6f057" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8190-8f91-f9f055e1de3b" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8195-b4f8-e86bf12d8c7b" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;email&quot;: &quot;tuemail@dominio.com&quot;,  &quot;password&quot;: &quot;tucontraseña&quot;}</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8109-9eff-f361d13cf0db" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8184-8d2b-ef5c796f9743" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;token&quot;: &quot;&lt;jwt&gt;&quot;}</code></pre></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8180-86a7-e390f3f0f4b6" class="bulleted-list"><li style="list-style-type:disc"><code>400 Bad Request</code> si faltan campos.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81f8-b4c7-e98e38673db9" class="bulleted-list"><li style="list-style-type:disc"><code>401 Unauthorized</code> credenciales inválidas.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81e5-9ccf-ceb7e732a490" class="bulleted-list"><li style="list-style-type:disc"><code>415 Unsupported Media Type</code> si no es JSON.</li></ul></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8165-ae74-f0e1b403042d" class=""><strong>Notas</strong><br/>- El token expira en 2 horas.<br/>- Usar este token en rutas protegidas:</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-813d-a7f1-f07a1a3198d0" class=""><code>Authorization: Bearer &lt;token&gt;</code></p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-817e-a7c0-f27de7d21c0e"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-81ca-af03-e870355ddc74" class="">2. Usuarios</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-8121-bb7c-e481b1a99ace" class="">Crear usuario</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8186-977f-ef9a8c5a201a" class=""><strong>POST</strong> <code>/api/user/create</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81f6-93f2-d31edaa64fa0" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81cd-8098-db4da025fa9a" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8177-a5b2-e3b518b91a5e" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81b3-a624-e277fe92e1b2" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;nombre&quot;: &quot;Nombre Usuario&quot;,  &quot;email&quot;: &quot;correo@dominio.com&quot;,  &quot;password&quot;: &quot;contraseña&quot;}</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81e1-a3fd-e50a8070d50b" class=""><strong>Respuestas</strong><br/>- <code>201 Created</code></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81f5-85a6-d7c62b34e644" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;message&quot;: &quot;Usuario creado&quot;, &quot;user_id&quot;: &quot;&lt;id&gt;&quot; }</code></pre></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-815e-8012-c4399623eeb6" class="bulleted-list"><li style="list-style-type:disc"><code>400 Bad Request</code> si faltan campos.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81a6-8856-e6054d448d19" class="bulleted-list"><li style="list-style-type:disc"><code>409 Conflict</code> si el email ya está registrado.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81e9-a168-dcefa0a36fa0" class="bulleted-list"><li style="list-style-type:disc"><code>415 Unsupported Media Type</code> si no es JSON.</li></ul></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-813c-9d68-d3e44e506fd2"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-81c6-a992-ea91a271afe1" class="">Iniciar sesión</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8140-a545-e43c9f9fba55" class="">(Ver sección 1: Login)</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-818a-b7d8-c58d3acdee5b"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-81ab-85c7-f0b88338e7db" class="">Ver usuario por email o ID</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8186-ac85-cc25c14404bc" class=""><strong>POST</strong> <code>/api/user/show</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81c9-852b-e520440d2675" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81df-a6db-ef3adcd5f316" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8118-98b3-c70f0bff50a8" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81b6-afd0-fb4548ef8518" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;emailOrId&quot;: &quot;correo@dominio.com&quot; }</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-814a-bbee-ff410af54eb5" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Devuelve el documento del usuario sin el campo <code>password</code>.<br/>- <code>400 Bad Request</code> si falta <code>emailOrId</code>.<br/>- <code>404 Not Found</code> si no existe.<br/>- <code>415 Unsupported Media Type</code> si no es JSON.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8197-856f-feff0be110b8"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-811c-9ec3-f9335a2ed777" class="">Actualizar usuario</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-817e-81e8-c4c9ffd3a483" class=""><strong>PATCH</strong> <code>/api/user/update/&lt;user_id&gt;</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8157-82da-eee044b6f651" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8191-b979-e1ff61e4ef80" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json
Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81e5-94bc-d22172f8a865" class=""><strong>Path parameters</strong><br/>- <code>user_id</code> — ObjectId del usuario a actualizar.</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81c8-8ad9-d635aea69880" class=""><strong>Body (opcional, al menos un campo válido)</strong><br/>Campos aceptados:<br/>- <code>nombre</code>: string<br/>- <code>password</code>: string (se almacenará como hash bcrypt)<br/>- <code>wishlist_items</code>: array de objetos con al menos <code>vehicle_vin</code>. Ejemplo:</p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81d5-aa6c-e75fa6af2338" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;nombre&quot;: &quot;Nuevo Nombre&quot;,  &quot;wishlist_items&quot;: [    { &quot;vehicle_vin&quot;: &quot;VIN123&quot;, &quot;other&quot;: &quot;opcional&quot; }  ]}</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81af-b486-d6aa41535550" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Usuario actualizado correctamente.<br/>- <code>400 Bad Request</code> — Body no válido / ID inválido / sin campos válidos.<br/>- <code>401 Unauthorized</code> — Token inválido o expirado.<br/>- <code>403 Forbidden</code> — Si el <code>current_user</code> no coincide con <code>user_id</code>.<br/>- <code>415 Unsupported Media Type</code> si no es JSON.</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-812c-adf2-fd492252daf6" class=""><strong>Notas</strong><br/>- <code>password</code> se re-hashea automáticamente si se proporciona.<br/>- Para añadir elementos a wishlist se usa <code>$push</code> con <code>$each</code>. Asegúrate de enviar una lista.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-81af-bcf0-d5bc9852e44b"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-81eb-aedb-d90a2a9a7a6f" class="">Eliminar usuario</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8116-adeb-d9e5c8582598" class=""><strong>DELETE</strong> <code>/api/user/delete</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-817d-a685-cfd2e3d86915" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81a9-b543-dae6c4a01251" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ae-832d-fc1b8212fed7" class=""><strong>Body</strong><br/>- Ninguno.</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8162-b240-d9d0ade14505" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Usuario eliminado.<br/>- <code>401 Unauthorized</code> — Token inválido/usuario no encontrado.<br/>- <code>500 Internal Server Error</code> — Error eliminando.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8101-b36a-cdd99b62dd69"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8189-9b54-c0b4b3e7156b" class="">3. Wishlist</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-8169-84e5-e7162d24651e" class="">Añadir a wishlist</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8105-a282-eddc6b9be667" class=""><strong>POST</strong> <code>/api/user/wishlist/add</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-812c-91bb-c71f03eae5af" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8191-90c7-cf46601978b5" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json
Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8121-955d-c91395d07881" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8175-8164-d96fe54a77c9" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;vehicle_vin&quot;: &quot;VIN123&quot; }</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8136-aade-f8df41b49d9e" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Vehículo agregado.</p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81d9-93f0-d6b6d82ab7e1" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;message&quot;: &quot;Vehículo agregado a wishlist&quot;, &quot;item&quot;: { &quot;vehicle_vin&quot;: &quot;VIN123&quot;, &quot;added_at&quot;: &quot;...&quot; } }</code></pre></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8181-81b6-c72a4423a838" class="bulleted-list"><li style="list-style-type:disc"><code>400 Bad Request</code> — Falta vehicle_vin o ya existe.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8190-9b1c-d312c50311f5" class="bulleted-list"><li style="list-style-type:disc"><code>415 Unsupported Media Type</code> si no es JSON.</li></ul></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-81d8-9b77-e4933433ef5e"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-815e-8a7d-e88834c47fdd" class="">Eliminar de wishlist</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-815e-bcdd-f344030d8126" class=""><strong>POST</strong> <code>/api/user/wishlist/remove</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8140-88e2-f3abe2352eb3" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8134-a19b-d24a1a895316" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json
Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8147-9e14-d0a6a53a3f90" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81c7-9756-e5f898789c78" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;vehicle_vin&quot;: &quot;VIN123&quot; }</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8105-a30e-caf3410cb969" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Vehículo eliminado.<br/>- <code>404 Not Found</code> — Vehículo no estaba en la wishlist.<br/>- <code>415 Unsupported Media Type</code> si no es JSON.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-812e-a969-e278781b3ab6"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-814e-85be-e316358d2e97" class="">Obtener wishlist</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ca-909f-f2853ad525c1" class=""><strong>GET</strong> <code>/api/user/wishlist</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81a1-a38a-e48accfbf3bf" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8161-b295-ebe908aa56d4" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-815f-8a46-e8b2e70a51be" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81d1-bd1c-c76f9d4189ed" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;wishlist&quot;: [ { &quot;vehicle_vin&quot;: &quot;VIN123&quot;, &quot;added_at&quot;: &quot;...&quot; } ] }</code></pre></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-81dd-8713-c1cb1ecee9f6"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8107-9a0c-f22e31b5ccd3" class="">4. Compras</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-81be-b6da-f42ec97636e2" class="">Crear compra</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8117-aa68-e626f63e8985" class=""><strong>POST</strong> <code>/api/purchase/create</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ec-a822-ccd24ddb05a0" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-810c-b948-ca574867c91e" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json
Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8136-865e-d86f79660004" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81fc-ab6e-eb4b646bd939" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;vehicle_vin&quot;: &quot;VIN123&quot; }</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ac-987c-d59d6ff83678" class=""><strong>Flujo</strong><br/>1. Se busca el documento que contenga <code>vehiculos</code> con <code>vin</code>.<br/>2. Si existe, se inserta en <code>purchases</code>:</p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8160-88c9-daa11c51b976" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;ref_user_id&quot;: &quot;&lt;id_usuario&gt;&quot;,  &quot;ref_vehicle_vin&quot;: &quot;VIN123&quot;,  &quot;date&quot;: &quot;...&quot;}</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-814b-9ec0-cdf04dd0d5ce" class=""><strong>Respuestas</strong><br/>- <code>201 Created</code> — Devuelve la venta creada.<br/>- <code>404 Not Found</code> — Vehículo no encontrado.<br/>- <code>415 Unsupported Media Type</code> si no es JSON.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8181-b426-d64796c6f885"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8142-8235-c29d9cc8d0f2" class="">5. Valoraciones</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-8130-9514-d6473a12a178" class="">Crear valoración</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-815f-a173-df63a301b88a" class=""><strong>POST</strong> <code>/api/valoration/create</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-816d-af2a-d032b42653f5" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81c8-9d59-e8c859d730e9" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json
Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81a0-aa9e-c878c8bc08cc" class=""><strong>Body (requerido)</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8167-a25b-dc467d3bab14" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;vehicle_vin&quot;: &quot;VIN123&quot;,  &quot;rating&quot;: 4,  &quot;comment&quot;: &quot;Texto opcional&quot;}</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81db-8104-d4df031edf94" class=""><strong>Validaciones</strong><br/>- <code>rating</code> debe existir y ser entero entre 1 y 5.<br/>- Usuario no debe haber valorado el mismo <code>vehicle_vin</code> antes (índice único).</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ef-a33a-e8222db5f9c9" class=""><strong>Respuestas</strong><br/>- <code>201 Created</code><br/>- <code>400 Bad Request</code> — rating inválido o faltante.<br/>- <code>409 Conflict</code> — ya valorado por el usuario.<br/>- <code>404 Not Found</code> — vehículo no encontrado.<br/>- <code>415 Unsupported Media Type</code> si no es JSON.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-81db-bf0a-cef826aad27e"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-819f-acab-cec2c4d99db3" class="">Obtener valoraciones por VIN (público)</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8119-9e81-fcb8a1e26545" class=""><strong>GET</strong> <code>/api/valorations/&lt;vehicle_vin&gt;?page=1&amp;per_page=10</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8150-8a3d-dbd07e67076f" class=""><strong>Query params</strong><br/>- <code>page</code> (opcional, default 1)<br/>- <code>per_page</code> (opcional, default 10)</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-814b-9476-f00ea91c4264" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81a1-92b1-dd07d05e546e" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{  &quot;vehicle_vin&quot;: &quot;VIN123&quot;,  &quot;page&quot;: 1,  &quot;per_page&quot;: 10,  &quot;total&quot;: 25,  &quot;average_rating&quot;: 4.2,  &quot;valorations&quot;: [ { &quot;user_id&quot;: &quot;...&quot;, &quot;rating&quot;: 5, &quot;comment&quot;: &quot;...&quot;, &quot;created_at&quot;: &quot;...&quot; } ]}</code></pre></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8143-821c-f72ee874d4dc" class="bulleted-list"><li style="list-style-type:disc"><code>400 Bad Request</code> si params no son enteros.</li></ul></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8154-a224-c97a4796d0e9"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-8172-9521-cf0d9da76671" class="">Actualizar valoración</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81b4-a1ee-e1b6e864b98a" class=""><strong>PATCH</strong> <code>/api/valoration/update/&lt;valoration_id&gt;</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8174-abbc-da97f2cf91a2" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-816f-a8d8-ceae912b1c2b" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Content-Type: application/json
Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81d1-9146-d52abd70d07c" class=""><strong>Body (al menos un campo válido)</strong><br/>- <code>rating</code> (integer 1-5)<br/>- <code>comment</code> (string)</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-819e-a59e-fe32ad5b2382" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Valoración actualizada.<br/>- <code>400 Bad Request</code> — rating inválido.<br/>- <code>403 Forbidden</code> — si el usuario no es propietario.<br/>- <code>404 Not Found</code> — valoración no encontrada.<br/>- <code>415 Unsupported Media Type</code> si no es JSON.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-811e-9d76-e89bf7e7c376"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-810a-b341-ea68570a1de5" class="">Eliminar valoración</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8163-b215-d1e7d46ab51d" class=""><strong>DELETE</strong> <code>/api/valoration/delete/&lt;valoration_id&gt;</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8125-80b8-d29876f1880a" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81d6-9a9f-cf9be9f5595c" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">Authorization: Bearer &lt;token&gt;</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8130-acce-e53f7b75a75a" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Eliminada.<br/>- <code>403 Forbidden</code> — no propietario.<br/>- <code>404 Not Found</code> — no existente.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-813d-bdda-f210fa9e1394"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-81dd-998e-ff68dcd342a7" class="">6. Vehículos</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-819b-9f19-d66591709b53" class="">Listar todos (paginado)</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8149-9660-f2d6dc288d05" class=""><strong>GET</strong> <code>/api/auto/listings?page=1&amp;per_page=100</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81ae-9d09-cd668e272ae9" class=""><strong>Query params</strong><br/>- <code>page</code> (opcional, default 1)<br/>- <code>per_page</code> (opcional, default 100)</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81db-b589-edaae651f4cd" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81b3-8f97-ee1a5a78ab1b" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;page&quot;: 1, &quot;per_page&quot;: 100, &quot;data&quot;: [ ...documents... ] }</code></pre></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8162-ba94-c1d1369a29af" class="bulleted-list"><li style="list-style-type:disc"><code>400 Bad Request</code> si paginación inválida.</li></ul></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-810c-b3d1-fc5ade05cd47" class=""><strong>Nota</strong><br/>- La colección <code>vehicles</code> almacena un documento con <code>vehiculos</code> como array. El endpoint devuelve los documentos de la colección.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8188-9053-d3c381b445d2"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-812c-82e3-cc7b534d11a3" class="">Filtrar listados</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-818b-978f-f85ad3bbdb3a" class=""><strong>GET</strong> <code>/api/auto/listings/filter?doors=4&amp;fuel=gas&amp;make=Toyota</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8139-b684-c44e1692393e" class=""><strong>Query params permitidos</strong><br/>- doors (int)<br/>- drivetrain (string)<br/>- engine (string)<br/>- fuel (string)<br/>- make (string)<br/>- model (string)<br/>- seats (int)<br/>- transmission (string)</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8175-aa8b-c3c6b104587b" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8140-91d9-d88dbb9c6220" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">(none required)</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-813f-8fea-f433958b9667" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Lista de vehículos que coinciden con el filtro (se hace $unwind sobre vehiculos).<br/>- <code>400 Bad Request</code> si parámetros numéricos inválidos.</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8181-9110-de81375282f8" class=""><strong>Detalles</strong><br/>- Los filtros de texto son case-insensitive exact-match usando regex con inicio y fin (<code>^...$</code>).</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8128-aaad-ccbb5eb884e3"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8104-92e0-d826fec2bd12" class="">7. Integración con Auto.dev</h2></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-814a-afbb-f63c77d33377" class="">Actualizar Mongo con todos los listings</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-812d-90be-ec435a24ea20" class=""><strong>GET</strong> <code>/auto/actualizarMongo</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8112-80b1-e117478a31e2" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8145-8484-c98e853ebe85" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">(none required)</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-812c-90f9-d25428b8cf6b" class=""><strong>Proceso</strong><br/>1. Llama a la API externa <code>https://api.auto.dev/listings?limit=9999</code> con autorización (token interno, no incluido aquí).<br/>2. Mapea la respuesta con <code>interfaces.mapearListing</code>.<br/>3. Borra <code>vehicles</code> (<code>delete_many({})</code>) y guarda el mapeo:<br/>- Si el mapeo es un dict: <code>insert_one</code><br/>- Si fuera una lista: <code>insert_many</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8114-bc83-fd7a09e15e85" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Resultado de la inserción.<br/>- <code>502 Bad Gateway</code> — Fallo comunicando con auto.dev o respuesta no JSON.<br/>- <code>500 Internal Server Error</code> — Error guardando en DB.</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8158-948e-feabe2d29950" class=""><strong>Recomendación</strong><br/>- Asegurarse de que la estructura devuelta por <code>mapearListing</code> coincida con la expectativa de inserción.</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8123-8e49-e2f37437dcc8"/></div><div style="display:contents" dir="auto"><h3 id="2c198dbf-b003-81fb-aa83-d2d0616c05ec" class="">Obtener imágenes por VIN (público)</h3></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-81b3-9363-fa1a10befa50" class=""><strong>GET</strong> <code>/auto/image/&lt;vin&gt;</code></p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8195-afa4-c1d3ad7a3207" class=""><strong>Headers</strong></p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-8150-9316-f27ec97da9f6" class="code code-wrap"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">(none required)</code></pre></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8127-b2f9-ca31cb13aad5" class=""><strong>Proceso</strong><br/>- Llama a <code>https://api.auto.dev/photos/&lt;vin&gt;</code> y devuelve <code>data.retail</code> de la respuesta.</p></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-8146-b6d9-ef546d27ed9b" class=""><strong>Respuestas</strong><br/>- <code>200 OK</code> — Array de URLs/objetos de imágenes.<br/>- <code>502 Bad Gateway</code> — Fallo comunicando con auto.dev.<br/>- <code>415 Unsupported Media Type</code> — no aplica (GET).</p></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-8123-9a18-ca4d23e35051"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8191-b2f1-dcf13dc3c06b" class="">8. Respuestas y códigos de estado comunes</h2></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81d2-9392-c53c197d47e7" class="bulleted-list"><li style="list-style-type:disc"><code>200 OK</code> — Operación correcta.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-816b-8504-cb6cca9dafc3" class="bulleted-list"><li style="list-style-type:disc"><code>201 Created</code> — Recurso creado.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-814c-94ec-c4d28cff2f3e" class="bulleted-list"><li style="list-style-type:disc"><code>400 Bad Request</code> — Datos/params inválidos.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-816c-9b98-f6f27a991203" class="bulleted-list"><li style="list-style-type:disc"><code>401 Unauthorized</code> — Token faltante o inválido.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81a3-96b3-d107f768921a" class="bulleted-list"><li style="list-style-type:disc"><code>403 Forbidden</code> — No autorizado para recurso.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8166-a8c4-c4c64361734f" class="bulleted-list"><li style="list-style-type:disc"><code>404 Not Found</code> — Recurso no encontrado.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-81cf-a1d7-f72aa9d4ff2f" class="bulleted-list"><li style="list-style-type:disc"><code>409 Conflict</code> — Conflicto (por ejemplo email duplicado o valoración previa).</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8148-bb6d-de9f12ac2f20" class="bulleted-list"><li style="list-style-type:disc"><code>415 Unsupported Media Type</code> — Content-Type no es application/json.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8131-affa-ffbba514edcc" class="bulleted-list"><li style="list-style-type:disc"><code>500 Internal Server Error</code> — Error en servidor / BD.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-818c-8c7a-f20de3aff853" class="bulleted-list"><li style="list-style-type:disc"><code>502 Bad Gateway</code> — Error en la API externa.</li></ul></div><div style="display:contents" dir="auto"><p id="2c198dbf-b003-816b-bc8c-ffebe034fe48" class="">Formato de error:</p></div><div style="display:contents" dir="auto"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c198dbf-b003-81cc-be5b-c19dc98daaeb" class="code code-wrap"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">{ &quot;error&quot;: &quot;mensaje&quot; }</code></pre></div><div style="display:contents" dir="auto"><hr id="2c198dbf-b003-81b9-80d7-eebf504e7667"/></div><div style="display:contents" dir="auto"><h2 id="2c198dbf-b003-8188-856f-cbbc02fce609" class="">9. Notas de implementación y recomendaciones</h2></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8184-a6ad-cb61b58ffe7c" class="bulleted-list"><li style="list-style-type:disc">Todas las rutas que reciben JSON revisan <code>request.is_json</code> y devuelven <code>415</code> si no es JSON.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-817e-b108-f2a666ee3f87" class="bulleted-list"><li style="list-style-type:disc">El decorador <code>token_required</code> decodifica JWT y carga <code>current_user</code>.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8185-a894-ea60ab2892b8" class="bulleted-list"><li style="list-style-type:disc"><code>serialize()</code> convierte <code>ObjectId</code> y <code>datetime</code> antes de responder.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8133-9d67-eabae186047d" class="bulleted-list"><li style="list-style-type:disc">Indexar campos relevantes es importante (ya hay índices: email único, vehiculos.vin, índice único en valorations).</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8139-955c-d44973b26eda" class="bulleted-list"><li style="list-style-type:disc">Evitar exponer la <code>API_KEY</code> o <code>SECRET</code> en repositorio. Usar variables de entorno.</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-810d-8788-c9643439172f" class="bulleted-list"><li style="list-style-type:disc">Considerar almacenar un documento por vehículo si el catálogo crecerá mucho (consulta y actualización más eficientes).</li></ul></div><div style="display:contents" dir="auto"><ul id="2c198dbf-b003-8184-a273-d0c3b1bde169" class="bulleted-list"><li style="list-style-type:disc">Validar y sanitizar entradas similares a <code>vehicle_vin</code> antes de consultas para evitar inyecciones o consultas ineficientes.</li></ul></div></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>